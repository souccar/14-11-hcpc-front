<app-list-page-header
  [title]="title"
  [itemOrder]="itemOrder"
  [itemOptionsOrders]="itemOptionsOrders"
  [displayMode]="displayMode"
  [itemOptionsPerPage]="[5, 10, 20]"
  [itemsPerPage]="itemsPerPage"
  [selectAllState]="selectAllState"
  (changeDisplayMode)="changeDisplayMode($event)"
  (addNewItem)="showAddNewModal()"
  (deleteItem)="deleteItem()"
  [selectedCount]="selectedCount"
  (selectAllChange)="selectAllChange($event)"
  (itemsPerPageChange)="itemsPerPageChange($event)"
  (changeOrderBy)="changeOrderBy($event)"
  (searchKeyUp)="searchKeyUp($event)"
>
</app-list-page-header>
<div class="row">
  <div class="col-12 mb-4 data-table-rows">
    <ngx-datatable [rows]="data" [columnMode]="ColumnMode.flex" [limit]="itemsPerPage" [headerHeight]="20"
      [footerHeight]="100" #table [sorts]="[{ prop: 'title', dir: 'asc' }]" (select)="onSelect($event)"
      [selected]="selected">
      <ngx-datatable-column [name]="l('Title')" prop="title" [flexGrow]="1">
        <ng-template let-row="row" ngx-datatable-cell-template>
            {{row.title}}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column [name]="l('Plan')" prop="palnId" [flexGrow]="1">
        <ng-template let-row="row" ngx-datatable-cell-template>
          {{row.plan?.title}}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column [name]="l('Products')" prop="products" [flexGrow]="1">
        <ng-template let-row="row" ngx-datatable-cell-template>
           <span  *ngFor="let outputRequestProduct of row.outputRequestProducts">{{outputRequestProduct.product.name}} , </span>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column  prop="Status" [name]="l('Status')" [flexGrow]="1">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <span class="badge badge-pill badge-outline-warning  mb-1" *ngIf="row.status==0">{{'Pending'|localize}}</span>
          <span class="badge badge-pill badge-outline-primary  mb-1" *ngIf="row.status==1">{{'InProduction'|localize}}</span>
          <span class="badge badge-pill badge-outline-success  mb-1" *ngIf="row.status==2">{{'Finished'|localize}}</span>
        </ng-template>
      </ngx-datatable-column>
      <ng-conatiner >
      <ngx-datatable-column   [name]="l('OutputDate')" prop="OutputDate" [flexGrow]="1">
        <ng-template let-row="row" ngx-datatable-cell-template>
          {{row.outputDate|date:"yyyy-MM-dd"}}
        </ng-template>
      </ngx-datatable-column>
    </ng-conatiner>

      <ngx-datatable-column [sortable]="false" [name]="l('Action')" prop="Action" [flexGrow]="1">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <button id="button-basic" type="button" id="edit" class="btn btn-empty text-primary align-self-center "
            (click)="editButton(row.id)">
            <i class=" text-primary simple-icon-pencil"></i>
          </button>
          <button id="button-basic" type="button" id="delete" class=" btn btn-empty text-primary align-self-center "
            (click)="delete(row)">
            <i class="  text-primary simple-icon-trash"></i>
          </button>
          <span *ngIf="row.status!=2" id="anchorDropdownContainer">
            <span dropdown container="#anchorDropdownContainer"
          >
              <a href id="basic-link" dropdownToggle (click)="false" aria-controls="basic-link-dropdown">
              <i class="text-primary simple-icon-options-vertical" [tooltip]="tooltipData.changeStatus"
              ></i></a>
              <ul id="basic-link-dropdown" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="basic-link">
                <a *ngIf="row.status!=1" class="dropdown-item" (click)=" onchangeStatusToInProduction(row.id)">In Production</a>
                <a class="dropdown-item" (click)="onchangeStatusToFinish(row.id)">Finish</a>

              </ul>
            </span>
          </span>


        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-footer *ngIf="true">
        <ng-template ngx-datatable-footer-template let-rowCount="rowCount" let-pageSize="pageSize"
          let-selectedCount="selectedCount" let-curPage="curPage" let-offset="offset" let-limit="limit">
          <div class="w-100 d-flex justify-content-center">
            <!-- <pagination [totalItems]="totalItem" [itemsPerPage]="itemsPerPage" [rotate]="true" [maxSize]="5"
          [(ngModel)]="currentPage" (pageChanged)="pageChanged($event)" class="justify-content-center"
          [customNextTemplate]="nextTemplate" [customPreviousTemplate]="prevTemplate">
        </pagination> -->
            <!-- <ng-template #nextTemplate let-disabled="disabled" let-currentPage="currentPage">
          <i class='simple-icon-arrow-right'></i>
        </ng-template>
        <ng-template #prevTemplate let-disabled="disabled" let-currentPage="currentPage">
          <i class='simple-icon-arrow-left'></i>
        </ng-template> -->
          </div>
        </ng-template>
      </ngx-datatable-footer>
    </ngx-datatable>
  </div>
  <!-- <div class="col-12 ">
    <div class="card">
      <div class="card-body">
      <div class="table-responsive">
        <table class="table table-hover table-striped  ">
          <thead>
            <tr>
              <th></th>
              <th scope="col">{{'Title'|localize}}</th>
              <th scope="col">{{'Plan'|localize}}</th>
              <th scope="col">{{'Product'|localize}}</th>
              <th scope="col">{{'Status'|localize}}</th>
              <th scope="col">{{'OutputDate'|localize}}</th>

            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let outputRequestMaterial of data; let i = index">
              <td>


                <span  id="anchorDropdownContainer">
                  <span dropdown container="#anchorDropdownContainer">
                    <a
                      href
                      id="basic-link"
                      dropdownToggle
                      (click)="(false)"
                      aria-controls="basic-link-dropdown"
                    >
                      <i
                        class="text-primary simple-icon-options-vertical"
                      ></i
                    ></a>
                    <ul
                      id="basic-link-dropdown"
                      *dropdownMenu
                      class="dropdown-menu dropdown-menu-left"
                      role="menu"
                      aria-labelledby="basic-link"
                    >
                    <ng-conatiner *ngIf="outputRequestMaterial.status == 0">
                      <a
                        id="button-basic"
                        type="button"
                        id="edit"
                        class="btn btn-empty dropdown-item text-primary align-self-center"
                        (click)="editButton(outputRequestMaterial.id)"
                      >

                        <i class="text-primary simple-icon-pencil">

                        </i>&nbsp;&nbsp;
                        <span>{{'Edit'|localize}}</span>
                      </a>
                      <a
                        id="button-basic"
                        type="button"
                        id="delete"
                        class="btn btn-empty dropdown-item text-primary align-self-center"
                        (click)="delete(outputRequestMaterial)"
                      >
                        <i class="text-primary simple-icon-trash"></i>
                        &nbsp;&nbsp;
                        <span>{{'Delete'|localize}}</span>
                      </a>
                    </ng-conatiner>
                      <a
                      id="button-basic"
                      type="button"
                      id="delete"
                      class="btn btn-empty dropdown-item text-primary align-self-center"
                      (click)="viewButton(outputRequestMaterial.id)"
                    >
                      <i class="text-primary simple-icon-eye "></i>
                      &nbsp;&nbsp;
                        <span>{{'View'|localize}}</span>
                    </a>
                    <li class="divider dropdown-divider"></li>
                      <a
                        *ngIf="outputRequestMaterial.status == 0"
                        class="dropdown-item"
                        (click)="onchangeStatusToInProduction(outputRequestMaterial.id)"
                        >{{ "InProduction" | localize }}</a
                      >
                      <a *ngIf="outputRequestMaterial.status == 1"
                        class="dropdown-item"
                        (click)="onchangeStatusToFinish(outputRequestMaterial.id)"
                        >{{ "Finished" | localize }}</a
                      >
                    </ul>
                  </span>
                </span>
            </td>
              <td>{{outputRequestMaterial.title}}</td>
              <td>{{outputRequestMaterial.plan?.title}}</td>
              <ng-conatiner *ngFor="let outputRequestProduct of outputRequestMaterial.outputRequestProducts">
              <td>{{outputRequestProduct.product.name }}</td>
            </ng-conatiner>
            <td><span
              class="badge badge-pill badge-outline-warning mb-1"
              *ngIf="outputRequestMaterial.status == 0"
              >{{ "Pending" | localize }}</span
            >
            <span
            class="badge badge-pill badge-outline-primary mb-1"
            *ngIf="outputRequestMaterial.status == 1"
            >{{ "InProduction" | localize }}</span
          >
          <span
              class="badge badge-pill badge-outline-success mb-1"
              *ngIf="outputRequestMaterial.status == 2"
              >{{ "Finished" | localize }}</span
            >
          </td>
            <td >{{outputRequestMaterial.outputDate|date:"yyyy-MM-dd"}}</td>




            </tr>
          </tbody>
        </table>
      </div>

    </div></div>


  </div> -->
</div>

  <div class="col-12">
    <!-- <pagination [totalItems]="totalItem" [itemsPerPage]="itemsPerPage" [rotate]="true" [maxSize]="5"
      [(ngModel)]="currentPage" (pageChanged)="pageChanged($event)" class="justify-content-center"
      [customNextTemplate]="nextTemplate" [customPreviousTemplate]="prevTemplate">
    </pagination> -->
  </div>
<!-- </div> -->

<!-- <ng-template #nextTemplate let-disabled="disabled" let-currentPage="currentPage">
  <i class='simple-icon-arrow-right'></i>
</ng-template>
<ng-template #prevTemplate let-disabled="disabled" let-currentPage="currentPage">
  <i class='simple-icon-arrow-left'></i>
</ng-template> -->
